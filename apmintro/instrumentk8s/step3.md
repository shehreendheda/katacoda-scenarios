The `discounts` and `advertisements` services have a Python-Flask framework. Instrumentation is done in two places: the files that are used to build the image for the service and the daemonset configuration file. 

1. Click `app-files/discounts-service/requirements.txt`{{open}} and `app-files/ads-service/requirements.txt`{{open}} to view the list of required libraries that are installed for the services. The `dd-trace` library (**Line 4**) has already been included.

2. Click `k8s-manifests/ecommerce-app/discounts.yaml`{{open}} to view the daemonset configuration file for the discount service. The following lines are relevant to trace and log collection. <p> **Line 23** - This image is used to build the discounts service. The image was built using the files in `app-files/store-frontend`. <p> **Line 25 and 26** - This command brings the Flask server online using the `ddtrace-run` wrapper. `ddtrace-run` automates instrumentation for the service. You can view more details for automatic and manual instrumentation using `ddtrace` in the <a href="http://pypi.datadoghq.com/trace/docs/web_integrations.html#flask" target="_blank">Datadog Python Trace and Profile Client</a> documentation. <p> **Line 41** - The `DD_AGENT_HOST` environment variable configures your application pods to pull the host IP in order to communicate with the Datadog Agent. <p> **Line 45** - `DD_LOGS_INJECTION=true` enables automatic injection of trace IDs into the logs from the supported logging libraries to correlate traces and logs. <p> **Line 47** - `DD_ANALYTICS_ENABLED=true` enables App Analytics for the traces. 

3. Click `k8s-manifests/ecommerce-app/advertisements.yaml`{{open}} to open the daemonset configuration file for the advertisements service. <p> Scroll through the file to view the same lines listed in step 2 for the advertisements service. 